{"version":3,"sources":["../src/removeTrackers.ts"],"sourcesContent":["function p(param_name: string): (url: URL, searchParams: URLSearchParams) => string {\n  return (_u, sp) => sp.get(param_name) ?? \"\";\n}\n\nconst trackers = new Map<string, (url: URL, searchParams: URLSearchParams) => string>([\n  [\"click.linksynergy.com\", p(\"murl\")],\n  [\"lenovo.evyy.net\", p(\"u\")],\n  [\"www.anrdoezrs.net\", p(\"url\")],\n  [\"go.redirectingat.com\", p(\"url\")],\n  [\"www.tkqlhce.com\", p(\"url\")],\n  [\"www.jdoqocy.com\", p(\"url\")],\n  [\"www.kqzyfj.com\", p(\"url\")],\n  [\"staplescanada.4u8mqw.net\", p(\"u\")],\n  [\"www.dpbolvw.net\", p(\"url\")],\n  [\"www.avantlink.com\", p(\"url\")],\n  [\"s.click.aliexpress.com\", p(\"dl_target_url\")],\n  [\"www.awin1.com\", p(\"p\")],\n  [\"www.gopjn.com\", p(\"url\")],\n  [\"the-home-depot-ca.pxf.io\", p(\"u\")],\n  [\n    \"\",\n    (url, searchParams) => {\n      if (url.protocol === \"about\" && url.pathname === \"neterror\") {\n        const originalUrl = searchParams.get(\"u\");\n        if (originalUrl) {\n          const newUrl = removeTracker(originalUrl);\n          if (newUrl !== originalUrl) {\n            return newUrl;\n          }\n        }\n      }\n      return url.href;\n    },\n  ],\n]);\nfunction removeTracker(href: string): string {\n  const url = new URL(href);\n  const extractor = trackers.get(url.host);\n  if (extractor) {\n    let newUrl = extractor(url, url.searchParams);\n    return newUrl;\n  }\n  return href;\n}\nexport function removeTrackers() {\n  [...document.getElementsByTagName(\"a\")].forEach((a) => {\n    try {\n      let newUrl = removeTracker(a.href);\n      if (newUrl !== a.href) {\n        console.debug(`Replacing link ${a.href} with ${newUrl}`);\n        a.href = newUrl;\n      }\n    } catch {}\n  });\n  try {\n    let newUrl = removeTracker(window.location.href);\n    if (newUrl !== window.location.href) {\n      console.debug(`Replacing window location ${window.location.href} with ${newUrl}`);\n      window.location.href = newUrl;\n    }\n  } catch {}\n}\nremoveTrackers();\n"],"names":["removeTrackers","p","param_name","sp","_u","get","trackers","Map","url","searchParams","protocol","pathname","originalUrl","newUrl","removeTracker","href","URL","extractor","host","document","getElementsByTagName","forEach","a","console","debug","window","location"],"mappings":"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"}