{"version":3,"sources":["../src/removeTrackers.ts"],"sourcesContent":["function p(param_name: string): (url: URL, searchParams: URLSearchParams) => string {\n  return (_u, sp) => sp.get(param_name) ?? \"\";\n}\n\nconst trackers = new Map<string, (url: URL, searchParams: URLSearchParams) => string>([\n  [\"click.linksynergy.com\", p(\"murl\")],\n  [\"lenovo.evyy.net\", p(\"u\")],\n  [\"www.anrdoezrs.net\", p(\"url\")],\n  [\"go.redirectingat.com\", p(\"url\")],\n  [\"www.tkqlhce.com\", p(\"url\")],\n  [\"www.jdoqocy.com\", p(\"url\")],\n  [\"www.kqzyfj.com\", p(\"url\")],\n  [\"staplescanada.4u8mqw.net\", p(\"u\")],\n  [\"www.dpbolvw.net\", p(\"url\")],\n  [\"www.avantlink.com\", p(\"url\")],\n  [\"s.click.aliexpress.com\", p(\"dl_target_url\")],\n  [\"www.awin1.com\", p(\"p\")],\n  [\"www.gopjn.com\", p(\"url\")],\n  [\"the-home-depot-ca.pxf.io\", p(\"u\")],\n  [\n    \"\",\n    (url, searchParams) => {\n      if (url.protocol === \"about\" && url.pathname === \"neterror\") {\n        const originalUrl = searchParams.get(\"u\");\n        if (originalUrl) {\n          const newUrl = removeTracker(originalUrl);\n          if (newUrl !== originalUrl) {\n            return newUrl;\n          }\n        }\n      }\n      return url.href;\n    },\n  ],\n]);\nfunction removeTracker(href: string): string {\n  const url = new URL(href);\n  const extractor = trackers.get(url.host);\n  if (extractor) {\n    let newUrl = extractor(url, url.searchParams);\n    return newUrl;\n  }\n  return href;\n}\nexport function removeTrackers() {\n  [...document.getElementsByTagName(\"a\")].forEach((a) => {\n    try {\n      let newUrl = removeTracker(a.href);\n      if (newUrl !== a.href) {\n        console.debug(`Replacing link ${a.href} with ${newUrl}`);\n        a.href = newUrl;\n      }\n    } catch {}\n  });\n  try {\n    let newUrl = removeTracker(window.location.href);\n    if (newUrl !== window.location.href) {\n      console.debug(`Replacing window location ${window.location.href} with ${newUrl}`);\n      window.location.href = newUrl;\n    }\n  } catch {}\n}\nremoveTrackers();\n"],"names":["p","param_name","sp","_u","get","removeTrackers","trackers","Map","url","searchParams","protocol","pathname","originalUrl","newUrl","removeTracker","href","URL","extractor","host","document","getElementsByTagName","forEach","a","console","debug","window","location"],"mappings":"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"}